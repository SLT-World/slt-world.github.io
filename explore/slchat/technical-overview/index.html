<!doctype html>
<html>
<head>
    <meta charset="UTF-8">
    <title>SLChat Technical Overview - SLT World</title>
    <link rel="shortcut icon" type="image/x-icon" href="../../../favicon.ico">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="../../../modern.css">
    <link rel="stylesheet" type="text/css" href="https://fonts.googleapis.com/css2?family=Material+Symbols+Rounded">
    <script src="../../../prism.js"></script>
    <link rel="stylesheet" href="../../../prism.css"/>
    <link rel="stylesheet" href="../style.css"/>
</head>
<body>
    <div class="content">
        <div class="navigation">
            <img src="../../../favicon.png" width="35" height="35" draggable="false">
            <h3>SLT World</h3>
        </div>
        <h1>SLChat Technical Overview</h1>
        <p>A <strong>technical overview</strong> of various SLChat features.</p>
        <div class="container">
            <div class="header">
                <span class="material-symbols-rounded icon">settings</span>
                <p>Pseudo-SPA Architecture</p>
            </div>
            <div style="display: flex;gap: 10px;flex-direction: column;">
                <p>Previously, SLChat relied entirely on server-side rendering using Jinja templates.</p>
                <p>While simple to implement at the time, it had several issues:</p>
                <ol class="container">
                    <li>Each navigation action generated and returned a fully rendered HTML page.</li>
                    <li>Server-side rendering on every navigation increased server load.</li>
                    <li>Full page reloads made the interface feel less responsive, impacting user experience.</li>
                </ol>
                <p>To address these issues, on 28/11/2025, SLChat switched to a pseudo-SPA (Single Page Application) model, partially. Other pages were soon to follow in the conversion to pseudo-SPA.</p>
                <p>Now, instead of re-rendering entire pages for each navigation, the application now sends JSON data while the client handles updates and transitions on each navigation.</p>
                <p>This reduces redundant server-side rendering, improves responsiveness, and provides smoother navigation without the overhead of a full SPA.</p>
            </div>
        </div>
        <div class="container">
            <div class="header">
                <span class="material-symbols-rounded icon">settings</span>
                <p>Link Previews</p>
            </div>
            <div style="display: flex;gap: 10px;flex-direction: column;">
                <p>Initially, SLChat did not support link preview rendering. Links appeared as plain text without any additional context.</p>
                <p>To provide richer previews, an external third-party service was used to fetch link metadata.</p>
                <p>However, this approach introduced several issues:</p>
                <ol class="container">
                    <li>Unreliable information</li>
                    <li>Privacy concerns</li>
                    <li>Dependence on a third-party service</li>
                    <li>Risk of failure which could not be instantly repaired</li>
                </ol>

                <p>On 1/12/2025, SLChat switched to its own link preview system, <a href="https://github.com/SLT-World/metafetcher" target="_blank">Metafetcher</a>.</p>
                <p>Although Metafetcher runs as a separate service, it is fully managed by the same person, ensuring reliability, security, and reduced dependency on external services.</p>
            </div>
        </div>
        <div class="container">
            <div class="header">
                <span class="material-symbols-rounded icon">settings</span>
                <p>Message Formatting: Transition from HTML to Markdown</p>
            </div>
            <div style="display: flex;gap: 10px;flex-direction: column;">
                <p>Originally, SLChat allowed messages to be formatted in HTML, providing extensive customization for users.</p>
                <p>However, this approach introduced several issues:</p>
                <ol class="container">
                    <li>Security risks requiring server-side HTML sanitization</li>
                    <li>Difficulty standardizing message content such as attachments</li>
                    <li>Increased storage requirements, as HTML blocks are larger than plain text</li>
                </ol>

                <p>To address these issues, SLChat deprecated HTML in favor of Markdown on 2/12/2025.</p>
                <p>Markdown reduces storage and bandwidth usage while maintaining a level of user-customizable rich content.</p>
                <p>Although the flexibility of HTML customization was lost, future improvements with more custom Markdown syntaxes are planned to restore the lost flexibility.</p>
                <p>This change simplifies message rendering, standardizes content, and reduces disk space usage.</p>
            </div>
        </div>
        <div class="container">
            <div class="header">
                <span class="material-symbols-rounded icon">settings</span>
                <p>Server Storage Optimization</p>
            </div>
            <div style="display: flex;gap: 10px;flex-direction: column;">
                <p>Previously, all messages of a chat were stored in a single, uncompressed JSON file.</p>
                <p>This caused rapid storage growth, even minor spamming could consume significant disk space.</p>
                <p>At one point, SLChat had only 15% available storage remaining.</p>

                <p>On 26/11/2025, SLChat implemented a new storage system, splitting messages into multiple compressed files.</p>

                <p>This change drastically reduced disk space usage.</p>
                <p>For example, a set of messages that previously occupied 1 MB now requires approximately 0.05 MB.</p>
                <p>Some data was however, lost during migration, but overall disk space usage was greatly reduced as a result.</p>
            </div>
        </div>
        <div class="container">
            <div class="header">
                <span class="material-symbols-rounded icon">settings</span>
                <p>Storage Abuse Detection</p>
            </div>
            <div style="display: flex;gap: 10px;flex-direction: column;">
                <p>Before the storage optimization on 26/11/2025, SLChat included an automated system to detect high-storage abuse.</p>
                <p>Servers exceeding 1 MB were evaluated to identify spam, and offending accounts and servers were automatically terminated.</p>

                <p>After the storage redesign, this automatic termination system was removed, as storage abuse became less impactful.</p>
                <p>However, manual inspections were still required to punish offenders, regardless of the impact made.</p>

                <p>A replacement is planned for future updates.</p>
            </div>
        </div>
    </div>
</body>
</html>