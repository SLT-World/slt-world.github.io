<!doctype html>
<html>
  <head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="../../style.css">
    <style>li { display: block; }</style>
  </head>
  <body>
    <h1>Test: History API</h1>
    <p>Tests for the availability & support of the History API.</p>
    <hr>
    <ul id="results">
      <button onclick="pushStateA()">History Push State</button>
      <button onclick="pushStateB()">History Push State Hash</button>
      <button onclick="replaceStateA()">History Replace State</button>
      <button onclick="replaceStateB()">History Replace State Hash</button>
      <button onclick="assignA()">Location Assign</button>
      <button onclick="assignB()">Location Assign Hash</button>
      <button onclick="replaceA()">Location Replace</button>
      <button onclick="replaceB()">Location Replace Hash</button>
    </ul>
    <script>
      const list = document.getElementById("results");
      function logList(success, text, result) {
        const li = document.createElement("li");
        if (success != null) { li.classList.add(success ? "success" : "fail"); }
        li.innerHTML = `<strong>${text}</strong>`;
        if (result != "") { li.innerHTML += ` - <code>${result}</code>`; }
        list.insertBefore(li, list.firstChild);
      }
      function logHeader(text) {
        const h = document.createElement("h2");
        h.innerHTML = text;
        list.appendChild(h);
      }
      const hs = ('history' in window)
      logList(hs, "History API", hs ? "Supported" : "Unsupported");
      if (hs) {
        function pushStateA() {
          history.pushState({}, '', '/?a=b');
        }

        function pushStateB() {
          history.pushState({}, '', '/#a=b');
        }

        function replaceStateA() {
          history.replaceState({}, '', '/?a=b');
        }

        function replaceStateB() {
          history.replaceState({}, '', '/#a=b');
        }

        function assignA() {
          location.assign('/?a=b');
        }

        function assignB() {
          location.assign('/#a=b');
        }

        function replaceA() {
          location.replace('/?a=b');
        }

        function replaceB() {
          location.replace('/#a=b');
        }
      }
    </script>
  </body>
</html>
